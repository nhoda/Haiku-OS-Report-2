\title{\textbf{Haiku}\\OS Report Part II}
\author{COMP 3000\\ \\Troy Hildebrandt\\Nima Hoda}
\date{\today}

\documentclass{article}

\usepackage{cite}
\usepackage{url}
\usepackage{graphicx}
\usepackage{subfig}

% Page setup
% Shamelessly stolen from Pat Morin's Open Data Structures
\setlength{\textheight}{8.5in}
\setlength{\textwidth}{6in}
\setlength{\topmargin}{-0.375in}
\setlength{\oddsidemargin}{.25in}
\setlength{\evensidemargin}{.25in}
\setlength{\headheight}{0.200in}
\setlength{\headsep}{0.4in}
\setlength{\footskip}{0.500in}
\setlength{\parskip}{1.5ex}
\setlength{\parindent}{1.25cm}
%\flushbottom

\begin{document}
\maketitle

\section{Introduction}

In the last part of this multi-part report we discussed some
background information about the Haiku operating system, its
installation, its basic operation and presented a usage evaluation.
In this part we will discuss software packaging, major packages
included in the base installation and system initialization.

\section{Software Packaging}

Despite starting life as OpenBeOS over ten years ago, Haiku is still lacking a comprehensive package management system. While a package management system is currently in the works\cite{HaikuFuturePkgMan}, there is still much to be done before it's ready for widespread deployment and use\cite{HaikuPkgTodo}. Instead, Haiku has relied on several alternate techniques and stop-gap technologies to distribute software packages.

One such stop-gap technology is the \texttt{installoptionalpackage} script included with Haiku, admitted by the developers of Haiku themselves as a ``band-aid for the lack of a proper package manager.''\cite{InstallOptionalPackage} This script provides limited functionality similar to more complete package management systems, such as the ability to list not only installed packages, but available packages as well. The benefit to this script versus other methods of obtaining software in Haiku is that the software packages available through \texttt{installoptionalpackage} are sanctioned by the developers of Haiku, with guaranteed compatibility. A list of packages can be obtained by simply typing \texttt{installoptionalpackage -l}, and then installation can be done by way of \texttt{installoptionalpackage -a <packagename>}.

The Haiku development team has attempted to maintain BeOS compatibility, which includes support for BeOS .PKG files as early as 2007.\cite{OpeningPkgFiles} At this point in time, it looks like the \textit{PackageInstaller} that comes as part of Haiku for compatibility with BeOS package files is fully functional, having personally installed Quake II for BeOS within Haiku through a .PKG file. This is great, aside from the fact that the \textit{PackageInstaller} does simply that, installs. Unlike complete package management systems, which store information on what packages are installed and allow for simple uninstallation as well, BeOS .PKG support in Haiku only allows for quick installation.

During BeOS's life span, an application known as \textit{SoftwareValet} was used for the distribution of BeOS PKG files. \textit{SoftwareValet} provided software through a centralized server known as BeDepot\cite{SoftwareValet} and provided functionality for not only registration, but also software updates of installed packages. Unfortunately, the PKG format used by SoftwareValet, and built using the \textit{PackageBuilder} tool, were proprietary and had to be reverse engineered.\cite{OpeningPkgFiles} This is likely a contributing factor in the development of an entirely new software packaging system for Haiku, and an explanation for the rudimentary support for BeOS software packages.

Another source of software for Haiku is what's known as ports. Ports of software already available on other systems can be acquired at \textit{http://ports.haiku-files.org/}. A simple script is available from this website that allows the quick installation of an application known as \textit{HaikuPorter}. This program, once installed, essentially works in much the same way as \texttt{installoptionalpackages} does, by providing a list of available ports, and providing automated download of these ports packages. .BEP (Be Ports) files are used to determine the rules of downloading, building, and installing Ports packages.\cite{BepFiles}

The process of obtaining software through \textit{HaikuPorter} is a simple one. Simply obtain the ports tree using \texttt{haikuporter -g} much like you obtain a list of available packages with something like Ubuntu's aptitude, or even the very simple \texttt{installoptionalpackages} script available in Haiku, list available ports through \texttt{haikuporter -l} and then choose a piece of software from this tree to install with \texttt{haikuporter -i <portname>}. The .BEP file provides information for automating the download, build, and installation procedures.\cite{BepFiles} A major downside to downloading software available in the ports tree is that much of the software is incomplete and incompatible with Haiku at this point in time. \textit{HaikuPorter}, much like \texttt{installoptionalpackages}, is also still not a substitute for a proper package management system. It lacks proper update, registration, and uninstallation functionality commonly associated with more comprehensive package management systems. \textit{HaikuPorter} also lacks the ability to automatically resolve dependencies, simply because its goal isn't to become as powerful as "powerful as Gentoo Portage or the FreeBSD ports system", making this a low priority.\cite{HaikuPorter}

Unfortunately in many cases, the only way to remove software on Haiku is to manually remove the directories and files associated with the application in question. The only alternative to this at this point is if an uninstallation script was provided to automate the process.\cite{AppInstallUninstall}

The goal for Haiku as far as software availability and installation is ultimately to have a proper package management system akin to that available with popular Linux distributions.\cite{HaikuFuturePkgMan} According to one of the developers responsible for developing a solution to package management for Haiku, \textit{HaikuPorter} will still play a very large role in the future. Haiku package files (.HPKG) will essentially work to resolve dependencies before invoking \textit{HaikuPorter} to complete the build and installation process.\cite{TappeOnPackages}

\section{Major Package Versions}

\section{Initialization}

Haiku initializes itself through a Bash shell script called \texttt{Bootscript}. The kernel calls upon this script directly when initializing applications and services when Haiku starts. \texttt{Bootscript} also calls upon a \texttt{SetupEnvironment} script that initializes important environment variables. Several applications and services are started when Haiku is initialized. Some of the important ones, in the order they are initialized, include:

\textbf{app\_server:}
``At the heart, it manages multiple applications simultaneously using the display device as a shared resource.''\cite{AppServer}

\textbf{mount\_server:}
A service that listens for system messages indicating new media has been detected and automatically mounts associated filesystems.\cite{AutoMounter}

\textbf{Tracker:}
An application that provides one-stop access to file system exploration. Clicking the ``Tracker'' button brings up a list of all open windows currently viewing any mounted file systems.\cite{Tracker}

\textbf{Deskbar:}
Similar to the Windows task bar, its ``Start'' bar is instead a button with the Haiku feather. It behaves exactly as one would expect, bringing up menus that provide access to applications, shutdown/sleep functionality, recent documents, system preferences, and more.\cite{Deskbar}

This was all discovered through a fortunate accident, finding the \texttt{Bootscript} in its logical location, \texttt{/boot/system/boot/}. Several scripts are found in this directory, and a \texttt{more} on Bootscript revealed its importance in Haiku's boot process. A \texttt{grep} on the kernel source files confirmed that \texttt{Bootscript} was indeed solely responsible for the order of application and service initialization in Haiku.

\bibliography{haiku-2}{}
\bibliographystyle{plain}

\end{document}
